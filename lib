-- AmongusLib UI Library
local AmongusLib = {}
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- Function to create draggable UI
local function makeDraggable(frame)
    local dragToggle, dragStart, startPos
    local function updateInput(input)
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
    
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragToggle = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragToggle = false
                end
            end)
        end
    end)
    
    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            if dragToggle then updateInput(input) end
        end
    end)
end

-- Creating a window
function AmongusLib:CreateWindow(options)
    local ScreenGui = Instance.new("ScreenGui")
    local Window = Instance.new("Frame")
    
    ScreenGui.Parent = game:GetService("CoreGui")
    
    Window.Size = UDim2.new(0, 400, 0, 300)
    Window.Position = options.Center and UDim2.new(0.5, -200, 0.5, -150) or UDim2.new(0, 50, 0, 50)
    Window.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Window.Parent = ScreenGui
    
    makeDraggable(Window)
    
    local WindowTable = { Container = Window }
    
    function WindowTable:AddTab(tabName)
        local Tab = Instance.new("Frame")
        Tab.Size = UDim2.new(1, 0, 1, 0)
        Tab.BackgroundTransparency = 1
        Tab.Parent = Window
        
        local TabTable = {}
        
        function TabTable:AddLeftGroupbox(title)
            return self:AddGroupbox(title, true)
        end
        
        function TabTable:AddRightGroupbox(title)
            return self:AddGroupbox(title, false)
        end
        
        function TabTable:AddGroupbox(title, left)
            local Groupbox = Instance.new("Frame")
            Groupbox.Size = UDim2.new(0.5, -10, 0, 150)
            Groupbox.Position = UDim2.new(left and 0 or 0.5, left and 5 or -5, 0, 10)
            Groupbox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            Groupbox.Parent = Tab
            
            local GroupboxTable = {}
            
            function GroupboxTable:AddLabel(text)
                local Label = Instance.new("TextLabel")
                Label.Size = UDim2.new(1, -10, 0, 30)
                Label.Text = text
                Label.TextColor3 = Color3.fromRGB(255, 255, 255)
                Label.BackgroundTransparency = 1
                Label.Parent = Groupbox
                
                local LabelTable = {}
                function LabelTable:AddColorPicker(name, data)
                    local ColorPicker = Instance.new("TextButton")
                    ColorPicker.Size = UDim2.new(1, -10, 0, 30)
                    ColorPicker.Text = data.Title
                    ColorPicker.Parent = Groupbox
                    ColorPicker.MouseButton1Click:Connect(function()
                        data.Callback(data.Default)
                    end)
                    return ColorPicker
                end
                
                return LabelTable
            end
            
            function GroupboxTable:AddToggle(name, data)
                local Toggle = Instance.new("TextButton")
                Toggle.Size = UDim2.new(1, -10, 0, 30)
                Toggle.Text = data.Text
                Toggle.Parent = Groupbox
                Toggle.MouseButton1Click:Connect(function()
                    data.Callback(not data.Default)
                end)
            end
            
            function GroupboxTable:AddSlider(name, data)
                local Slider = Instance.new("TextButton")
                Slider.Size = UDim2.new(1, -10, 0, 30)
                Slider.Text = data.Text .. ": " .. data.Default
                Slider.Parent = Groupbox
                Slider.MouseButton1Click:Connect(function()
                    data.Callback(data.Default)
                end)
            end
            
            function GroupboxTable:AddColorPicker(name, data)
                local ColorPicker = Instance.new("TextButton")
                ColorPicker.Size = UDim2.new(1, -10, 0, 30)
                ColorPicker.Text = data.Title
                ColorPicker.Parent = Groupbox
                ColorPicker.MouseButton1Click:Connect(function()
                    data.Callback(data.Default)
                end)
            end
            
            return GroupboxTable
        end
        
        return TabTable
    end
    
    return WindowTable
end

return AmongusLib
